# ドメイン駆動設計 (Domain-Driven Design)

ドメイン駆動設計（DDD）は、複雑なビジネスドメインに対処するためのソフトウェア開発アプローチです。このアプローチでは、ビジネスドメインの専門家と開発者が協力して共通の言語（ユビキタス言語）を確立し、ドメインの本質的な概念と関係性をコードに直接反映させます。

## 主要な概念

### 戦略的設計（Strategic Design）

- **境界づけられたコンテキスト（Bounded Context）**: 特定のドメインモデルが適用される範囲を定義します。
- **コンテキストマップ（Context Map）**: 異なる境界づけられたコンテキスト間の関係を視覚化します。
- **ユビキタス言語（Ubiquitous Language）**: チーム全体で使用される共通の言語です。

### 戦術的設計（Tactical Design）

- **値オブジェクト（Value Objects）**: 属性によって定義され、同一性を持たない不変のオブジェクト。
- **エンティティ（Entities）**: ライフサイクルを通じて同一性を保持するオブジェクト。
- **集約（Aggregates）**: 一貫性の境界を形成するエンティティと値オブジェクトのクラスター。
- **集約ルート（Aggregate Roots）**: 集約へのアクセスポイントとなるエンティティ。
- **リポジトリ（Repositories）**: 集約の永続化と取得を担当。
- **ドメインサービス（Domain Services）**: エンティティや値オブジェクトに自然に属さない操作を実装。
- **アプリケーションサービス（Application Services）**: ユースケースを実装し、ドメインオブジェクトを調整。
- **ドメインイベント（Domain Events）**: ドメイン内の重要な変更を通知するメカニズム。

## サンプルアプリケーション: Eコマースシステム

このプロジェクトはEコマースドメインを使用してDDDの概念を示しています。主な機能には以下が含まれます：

- 商品カタログの管理
- 買い物かごの操作
- 注文処理
- 在庫管理

### 実装された概念

- **値オブジェクト**: `Money`, `Address`, `ProductId` など
- **エンティティ**: `Customer`, `Order`, `Product` など
- **集約**: `Order`（ルートエンティティ）と `OrderItem`（子エンティティ）
- **リポジトリ**: 各集約に対応するリポジトリインターフェースとその実装
- **ドメインサービス**: `DiscountService`, `InventoryService` など
- **アプリケーションサービス**: `OrderService`, `ProductService` など
- **ドメインイベント**: `OrderPlacedEvent`, `ProductOutOfStockEvent` など

## プロジェクト構造

```
src/main/java/com/example/
├── domain/              # ドメインモデル
│   ├── model/           # エンティティと値オブジェクト
│   ├── service/         # ドメインサービス
│   ├── repository/      # リポジトリインターフェース
│   └── event/           # ドメインイベント
├── application/         # アプリケーションサービス
├── infrastructure/      # リポジトリ実装とインフラサービス
└── presentation/        # APIコントローラーなど
```

## 主要なメリット

- **ビジネスロジックの明確な表現**: コードがドメインの言語を直接反映
- **変更に対する柔軟性**: ドメインの変更がコードに自然に反映される
- **複雑なビジネスルールの取り扱い**: 複雑さをドメインモデルにカプセル化
- **チーム間のコミュニケーション向上**: 共通言語による理解の促進